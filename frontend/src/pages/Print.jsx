import React,{useState} from 'react';
export default function Print(){ const [date,setDate]=useState(''); async function openPrint(){ if(!date) return alert('날짜를 선택'); const res=await fetch(`/api/admin/attendance?date=${date}`); const data=await res.json(); const w=window.open('','_blank'); w.document.write(`<html><head><title>${date} 명단</title><style>body{font-family:Pretendard,sans-serif;padding:12mm}.col{width:48%;display:inline-block;vertical-align:top}h1{font-size:20pt;margin:0 0 10pt 0}h2{font-size:14pt;margin:0 0 6pt 0}ul{list-style:none;padding:0;margin:0}li{padding:6pt 0;border-bottom:1px dashed #bbb;font-size:12pt}.circle{width:12pt;height:12pt;border:1.5pt solid #999;border-radius:999px;display:inline-block;margin-right:8pt}@media print{.noprint{display:none}}</style></head><body><div class="noprint"><button onclick="window.print()">인쇄</button></div><h1>${date} 도시락 명단</h1><div class="col"><h2>[점심 리스트]</h2><ul>${data.lunch.map(n=>`<li><span class="circle"></span>${n}</li>`).join('')}</ul></div><div class="col" style="margin-left:4%;"><h2>[저녁 리스트]</h2><ul>${data.dinner.map(n=>`<li><span class="circle"></span>${n}</li>`).join('')}</ul></div></body></html>`); w.document.close(); }
  return (<div className="card p-5"><h1 className="text-xl font-bold mb-3">날짜별 명단 인쇄</h1><div className="flex gap-2 items-center"><input type="date" value={date} onChange={e=>setDate(e.target.value)} className="border rounded-xl px-3 py-2"/><button className="btn-ghost" onClick={openPrint}>열기/인쇄</button><a className="btn-ghost" href="#" onClick={e=>{e.preventDefault(); if(!date)return alert('날짜'); window.location.href='/api/admin/attendance.csv?date='+date;}}>CSV 다운로드</a></div></div>); }